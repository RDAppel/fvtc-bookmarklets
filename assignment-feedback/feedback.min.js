javascript:(()=>{let e="feedback-panel",t=document.querySelector(`#${e}`);if(t){let{display:n}=window.getComputedStyle(t,null);t.style.display="none"===n?"block":"none";return}let a=document.querySelector("#crumb_1")?.innerText.trim().split(" ").slice(0,-1).join(" "),r=document.querySelector("#pageTitleText")?.innerText;if(!a||!r)return;let l=`
		#feedback-panel{display:flex;flex-direction:row;justify-content:space-between;align-content:stretch;gap:4px;background-color:white;position:fixed;left:0;right:412px;bottom:0;height:30%;border:1px solid darkgray;padding:12px 48px;z-index:1000;}
		#feedback-panel a{underline;cursor:pointer;}
		#feedback-panel a:hover{text-decoration:underline;}
		.feedback-panel-inner {background-color:#eee;padding:12px;margin-bottom:12px;flex-grow:1;}
		.feedback-panel-inner .items {height:75%;overflow-y:scroll;}
		.feedback-panel-inner p {margin:2px;}
		.feedback-panel-inner .title {font-weight:bold;border-bottom:1px solid black;padding-bottom:2px;margin-bottom:4;text-align:center;}
		.feedback-panel-inner button {margin-top:12px;}
	`,i=document.createElement("style");i.styleSheet?i.styleSheet.cssText=l:i.appendChild(document.createTextNode(l)),document.querySelector("head").appendChild(i);let d={General:"generalFeedback",Course:`courseFeedback-${a}`,Assignment:`assignmentFeedback-${r}-${a}`},c=e=>JSON.parse(localStorage.getItem(d[e]))||[],o=(e,t)=>{localStorage.setItem(d[e],JSON.stringify(t))},p=document.querySelector("#feedbacktext_ifr"),s=p.contentWindow.document.querySelector("#tinymce"),m=document.querySelector("#currentAttempt_gradeDataPanelLink");"true"!==m.getAttribute("aria-expanded")&&m.click();let b=document.querySelector("#panelbutton2 > div > div.user-navigator > div.students-pager > h3 > span:nth-child(3)")?.innerText.split(" (Attempt")[0],u=b.split(" ")[0],g=e=>{let t=document.createRange();t.selectNodeContents(e),t.collapse(!1);let n=window.getSelection();n.removeAllRanges(),n.addRange(t)},x=document.querySelector("body"),f=document.createElement("div");f.id=e,f.classList.add("feedback-panel"),x.append(f);let k=(e,t)=>{e=e.trim().replace("{{firstName}}",u);let n=document.createElement("p");t.append(n);let a=document.createElement("a");n.append(a),a.innerText=e,a.addEventListener("click",()=>{g(s),s.focus();let t=document.createElement("p");t.innerText=e,s.append(t);let n=s.querySelector("p"),a=n.innerText;""===a.trim()&&n.remove()})};Object.keys(d).forEach(e=>{let t=document.createElement("div");t.classList.add("feedback-panel-inner"),f.append(t);let n=document.createElement("div");n.innerText=`${e} Feedback`,t.append(n),n.classList.add("title");let a=document.createElement("div");t.append(a),a.classList.add("items"),c(e).forEach(e=>k(e,a));let r=document.createElement("button");r.innerText=`New ${e} Feedback`,r.addEventListener("click",()=>{let t=window.prompt("Enter feedback text (use {{firstName}} to insert student's first name)");t&&(k(t,a),o(e,[...c(e),t]))}),t.append(r)})})();